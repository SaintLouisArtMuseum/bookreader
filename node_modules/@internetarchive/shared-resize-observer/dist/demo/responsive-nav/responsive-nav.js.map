{"version":3,"file":"responsive-nav.js","sourceRoot":"","sources":["../../../demo/responsive-nav/responsive-nav.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  html,\n  css,\n  LitElement,\n  TemplateResult,\n  CSSResult,\n  PropertyValues,\n  nothing,\n} from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\n\nimport iaIcon from '@internetarchive/icon-ia-logo';\nimport webIcon from '@internetarchive/icon-web';\nimport booksIcon from '@internetarchive/icon-texts';\nimport videoIcon from '@internetarchive/icon-video';\nimport audioIcon from '@internetarchive/icon-audio';\nimport softwareIcon from '@internetarchive/icon-software';\nimport imagesIcon from '@internetarchive/icon-images';\nimport userIcon from '@internetarchive/icon-user';\nimport uploadIcon from '@internetarchive/icon-upload';\nimport donateIcon from '@internetarchive/icon-donate';\n\nimport hamburgerIcon from '../icons/hamburger';\n\nimport './nav-item';\nimport './nav-menu';\nimport type {\n  SharedResizeObserverInterface,\n  SharedResizeObserverResizeHandlerInterface,\n} from '../../index';\nimport { ResponsiveNavMenuOption } from './models/menu-option';\nimport { ResponsiveNavMenuMode } from './models/menu-mode';\nimport { ResponsiveNavMenu } from './nav-menu';\n\nexport enum ResponsiveNavLeftMenuMode {\n  Full = 'full',\n  Hamburger = 'hamburger',\n}\n\n@customElement('responsive-nav')\nexport class ResponsiveNav\n  extends LitElement\n  implements SharedResizeObserverResizeHandlerInterface {\n  @property({ type: Number }) menuGap = 40;\n\n  @property({ type: Boolean }) showHiddenItems = false;\n\n  @property({ type: Boolean }) showDevOutline = false;\n\n  @property({ type: String }) id = `${Math.random()}`;\n\n  @property({ type: Object }) resizeObserver?: SharedResizeObserverInterface;\n\n  @property({ type: Number }) navItemSpacing = 10;\n\n  @property({ type: String }) leftMenuMode: ResponsiveNavLeftMenuMode =\n    ResponsiveNavLeftMenuMode.Full;\n\n  @property({ type: String }) leftMenuDisplayMode: ResponsiveNavMenuMode =\n    ResponsiveNavMenuMode.IconText;\n\n  @property({ type: String }) rightMenuDisplayMode: ResponsiveNavMenuMode =\n    ResponsiveNavMenuMode.IconText;\n\n  @query('#main-menu') mainMenu!: ResponsiveNavMenu;\n\n  @query('#hamburger-menu') hamburgerMenu!: ResponsiveNavMenu;\n\n  @query('#right-menu') rightMenu!: ResponsiveNavMenu;\n\n  disconnectedCallback(): void {\n    this.disconnectResizeObserver();\n  }\n\n  updated(changed: PropertyValues): void {\n    if (changed.has('resizeObserver')) {\n      this.setupResizeObserver();\n    }\n  }\n\n  handleResize(entry: ResizeObserverEntry): void {\n    const contentRect = entry.contentRect;\n    const availableWidth = contentRect.width - this.menuGap;\n    const fullTextWidth =\n      this.mainMenu.estimateFullWidth + this.rightMenu.estimateFullWidth;\n    const leftIconRightText =\n      this.mainMenu.estimateIconOnlyWidth + this.rightMenu.estimateFullWidth;\n    const iconOnlyWidth =\n      this.mainMenu.estimateIconOnlyWidth +\n      this.rightMenu.estimateIconOnlyWidth;\n\n    if (availableWidth < iconOnlyWidth) {\n      this.leftMenuMode = ResponsiveNavLeftMenuMode.Hamburger;\n      this.leftMenuDisplayMode = ResponsiveNavMenuMode.IconOnly;\n      this.rightMenuDisplayMode = ResponsiveNavMenuMode.IconOnly;\n    } else if (availableWidth < leftIconRightText) {\n      this.leftMenuMode = ResponsiveNavLeftMenuMode.Full;\n      this.leftMenuDisplayMode = ResponsiveNavMenuMode.IconOnly;\n      this.rightMenuDisplayMode = ResponsiveNavMenuMode.IconOnly;\n    } else if (availableWidth < fullTextWidth) {\n      this.leftMenuMode = ResponsiveNavLeftMenuMode.Full;\n      this.leftMenuDisplayMode = ResponsiveNavMenuMode.IconOnly;\n      this.rightMenuDisplayMode = ResponsiveNavMenuMode.IconText;\n    } else {\n      this.leftMenuMode = ResponsiveNavLeftMenuMode.Full;\n      this.leftMenuDisplayMode = ResponsiveNavMenuMode.IconText;\n      this.rightMenuDisplayMode = ResponsiveNavMenuMode.IconText;\n    }\n  }\n\n  private get currentLeftMenu(): ResponsiveNavMenu {\n    return this.leftMenuMode === ResponsiveNavLeftMenuMode.Full\n      ? this.mainMenu\n      : this.hamburgerMenu;\n  }\n\n  private get currentMenuOptions(): Array<ResponsiveNavMenuOption> {\n    return this.showHiddenItems\n      ? this.extendedMenuOptions\n      : this.baseMenuOptions;\n  }\n\n  private get baseMenuOptions(): ResponsiveNavMenuOption[] {\n    return [\n      {\n        title: 'Internet Archive',\n        icon: iaIcon,\n      },\n      {\n        title: 'Web',\n        icon: webIcon,\n      },\n      {\n        title: 'Books',\n        icon: booksIcon,\n      },\n      {\n        title: 'Video',\n        icon: videoIcon,\n      },\n      {\n        title: 'Audio',\n        icon: audioIcon,\n      },\n      {\n        title: 'Software',\n        icon: softwareIcon,\n      },\n      {\n        title: 'Images',\n        icon: imagesIcon,\n      },\n    ];\n  }\n\n  private get extendedMenuOptions(): ResponsiveNavMenuOption[] {\n    return this.baseMenuOptions.concat([\n      {\n        title: 'Donate',\n        icon: donateIcon,\n      },\n    ]);\n  }\n\n  private get rightMenuOptions(): ResponsiveNavMenuOption[] {\n    return [\n      {\n        title: 'ArchiveUser',\n        icon: userIcon,\n      },\n      {\n        title: 'Upload',\n        icon: uploadIcon,\n      },\n    ];\n  }\n\n  private get hamburgerMenuOptions(): ResponsiveNavMenuOption[] {\n    return [\n      {\n        icon: hamburgerIcon,\n      },\n    ];\n  }\n\n  private disconnectResizeObserver(): void {\n    if (!this.shadowRoot) return;\n    this.resizeObserver?.removeObserver({\n      handler: this,\n      target: this.shadowRoot.host,\n    });\n  }\n\n  private setupResizeObserver(): void {\n    if (!this.shadowRoot) return;\n    this.resizeObserver?.addObserver({\n      handler: this,\n      target: this.shadowRoot.host,\n    });\n  }\n\n  private get hamburgerMenuTemplate(): TemplateResult {\n    return html`\n      <responsive-nav-menu\n        id=\"hamburger-menu\"\n        .itemMode=${ResponsiveNavMenuMode.IconOnly}\n        .navItemSpacing=${this.navItemSpacing}\n        .menuOptions=${this.hamburgerMenuOptions}\n      ></responsive-nav-menu>\n    `;\n  }\n\n  private get mainLeftMenuTemplate(): TemplateResult {\n    return html`\n      <responsive-nav-menu\n        id=\"main-menu\"\n        .navItemSpacing=${this.navItemSpacing}\n        .menuOptions=${this.currentMenuOptions}\n        .itemMode=${this.leftMenuDisplayMode}\n      ></responsive-nav-menu>\n    `;\n  }\n\n  private get rightMenuTemplate(): TemplateResult {\n    return html`\n      <responsive-nav-menu\n        id=\"right-menu\"\n        class=\"right\"\n        .navItemSpacing=${this.navItemSpacing}\n        .menuOptions=${this.rightMenuOptions}\n        itemMode=${this.rightMenuDisplayMode}\n      ></responsive-nav-menu>\n    `;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <div\n        id=\"container\"\n        class=\"${this.showDevOutline ? 'show-dev-outlines' : nothing}\"\n      >\n        <div\n          class=\"left-menu ${this.leftMenuMode ===\n          ResponsiveNavLeftMenuMode.Hamburger\n            ? 'hamburger'\n            : 'full'}\"\n        >\n          ${this.hamburgerMenuTemplate} ${this.mainLeftMenuTemplate}\n        </div>\n\n        <div id=\"dev-visual-spacer\" style=\"width: ${this.menuGap}px\"></div>\n\n        ${this.rightMenuTemplate}\n      </div>\n    `;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        padding: 1rem 2rem;\n        position: relative;\n      }\n\n      #dev-visual-spacer {\n        display: inline-block;\n        height: 10px;\n      }\n\n      .show-dev-outlines responsive-nav-menu {\n        outline: 1px solid cyan;\n      }\n\n      .show-dev-outlines #dev-visual-spacer {\n        background-color: green;\n      }\n\n      .left-menu {\n        display: inline-block;\n      }\n\n      .left-menu.full #hamburger-menu {\n        position: absolute;\n        left: -10000px;\n        visibility: hidden;\n      }\n\n      .left-menu.hamburger #main-menu {\n        position: absolute;\n        left: -10000px;\n        visibility: hidden;\n      }\n\n      .right {\n        position: absolute;\n        right: 2rem;\n      }\n    `;\n  }\n}\n"]}