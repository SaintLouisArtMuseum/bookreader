{"version":3,"file":"ia-item-navigator.test.js","sourceRoot":"","sources":["../../test/ia-item-navigator.test.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\nimport { html, fixture, expect } from '@open-wc/testing';\nimport Sinon from 'sinon';\n\nimport { SharedResizeObserver } from '@internetarchive/shared-resize-observer';\nimport { ModalManager } from '@internetarchive/modal-manager';\nimport { ItemNavigator } from '../src/item-navigator';\nimport '../src/item-navigator';\n\nimport { ItemStub, menuProvider, shortcut } from '../test/ia-stub';\nimport {\n  ManageFullscreenEvent,\n  ToggleSideMenuOpenEvent,\n  SetSideMenuContentsEvent,\n  SetSideMenuShortcutsEvent,\n  ToggleSidePanelOpenEvent,\n} from '../src/interfaces/event-interfaces';\n\nafterEach(() => {\n  Sinon.restore();\n});\n\ndescribe('ItemNavigator', () => {\n  describe('Theaters', () => {\n    it('shows <ia-no-theater-available> if told', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n      el.viewAvailable = false;\n      await el.updateComplete;\n      expect(el.viewAvailable).to.be.false;\n      expect(el.shadowRoot?.querySelector('ia-no-theater-available')).to.exist;\n    });\n    it('opens main slot by default', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      expect(el.viewAvailable).to.be.true;\n      expect(el.shadowRoot?.querySelector('ia-no-theater-available')).to.be\n        .null;\n      expect(el.shadowRoot?.querySelector('slot[name=\"main\"]')).to.exist;\n    });\n  });\n  describe('`el.loaded`', () => {\n    it('toggles the spinning loader', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n      expect(el.loaded).to.be.null; // initial load\n      expect(el.shadowRoot?.querySelector('ia-itemnav-loader')).to.exist;\n    });\n    it('hides reader section if `!loaded`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n\n      expect(\n        el.shadowRoot?.querySelector('#reader')?.getAttribute('class')\n      ).to.contain('hidden');\n    });\n    it('shows reader when `loaded` ', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      el.loaded = true;\n      await el.updateComplete;\n      const mainTheaterSection = el.shadowRoot?.querySelector('#reader');\n      expect(mainTheaterSection?.classList.contains('hide')).to.be.false;\n      expect(el.loaded).to.be.true;\n      // `loaded` property is reflected as DOM attribute\n      expect(el.hasAttribute('loaded')).to.equal(true);\n      expect(el.shadowRoot?.querySelector('slot[name=\"main\"]')).to.exist;\n    });\n    it('listens to `@loadingStateUpdated` to update `loaded` for <no-theater-available>', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n\n      await el.updateComplete;\n      const spy = Sinon.spy();\n      el.loadingStateUpdated = spy;\n      el.loaded = null;\n      el.viewAvailable = false;\n      await el.updateComplete;\n      // check base properties\n      expect(el.loaded).to.equal(null);\n      expect(el.item).to.be.undefined;\n\n      // spy fires\n      expect(spy.called).to.equal(true);\n      expect(spy.callCount).to.equal(1);\n    });\n  });\n\n  describe('`el.sharedObserver`', () => {\n    it('uses one', async () => {\n      const sharedObserver = new SharedResizeObserver();\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator\n          .sharedObserver=${sharedObserver}\n        ></ia-item-navigator>`\n      );\n\n      expect(el.sharedObserver).to.equal(sharedObserver);\n      expect(typeof el.handleResize).to.equal('function');\n    });\n    it('freshly registers handlers', async () => {\n      const sharedObserver = new SharedResizeObserver();\n      const addObserverSpy = Sinon.spy(sharedObserver, 'addObserver');\n\n      await fixture<ItemNavigator>(\n        html`<ia-item-navigator\n          .sharedObserver=${sharedObserver}\n        ></ia-item-navigator>`\n      );\n\n      expect(addObserverSpy.callCount).to.equal(2);\n    });\n    it('removes handler when component disconnects', async () => {\n      const sharedObserver = new SharedResizeObserver();\n      const removeObserverSpy = Sinon.spy(sharedObserver, 'removeObserver');\n\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator\n          .sharedObserver=${sharedObserver}\n        ></ia-item-navigator>`\n      );\n\n      el.disconnectedCallback();\n      await el.updateComplete;\n\n      expect(removeObserverSpy.callCount).to.equal(1);\n    });\n    it('sets menu to overlay if container width is <= 600px', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n\n      expect(el.openMenuState).to.equal('shift'); // as starting point\n\n      const overlaySize = {\n        contentRect: { width: 600 },\n      } as ResizeObserverEntry;\n      el.handleResize(overlaySize);\n      await el.updateComplete;\n\n      expect(el.openMenuState).to.equal('overlay'); // changes open menu display to an overlay\n\n      const shiftSize = {\n        contentRect: { width: 601 },\n      } as ResizeObserverEntry;\n      el.handleResize(shiftSize);\n      await el.updateComplete;\n\n      expect(el.openMenuState).to.equal('shift');\n    });\n  });\n\n  describe('`el.modal`', () => {\n    it('uses one', async () => {\n      const modal = new ModalManager();\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .modal=${modal}></ia-item-navigator>`\n      );\n      expect(el.modal).to.equal(modal);\n    });\n  });\n\n  describe('full browser window immersion \"fullscreen\"', () => {\n    it('creates reflected attribute `viewportinfullscreen`', async () => {\n      /** to help with external styling adjustmnents */\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n      expect(el.getAttribute('viewportinfullscreen')).to.be.null;\n\n      el.viewportInFullscreen = true;\n      await el.updateComplete;\n\n      expect(el.getAttribute('viewportinfullscreen')).to.exist;\n    });\n    it('@ViewportInFullScreen', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator></ia-item-navigator>`\n      );\n      expect(el.viewportInFullscreen).to.be.null;\n\n      const yesFullscreenEvent = {\n        detail: {\n          isFullScreen: true,\n        },\n      } as ManageFullscreenEvent;\n      el.manageViewportFullscreen(yesFullscreenEvent);\n      await el.updateComplete;\n      expect(el.viewportInFullscreen).to.be.true;\n\n      const noFullscreenEvent = {\n        detail: {\n          isFullScreen: false,\n        },\n      } as ManageFullscreenEvent;\n      el.manageViewportFullscreen(noFullscreenEvent);\n      await el.updateComplete;\n      expect(el.viewportInFullscreen).to.be.null;\n    });\n  });\n\n  /* Side menu & shortcuts tests */\n  describe('el.menuOpened', () => {\n    it('toggles side menu open', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      el.menuContents = [menuProvider];\n      await el.updateComplete;\n\n      const nav = el.shadowRoot?.querySelector('nav');\n\n      expect(nav?.querySelector('#menu')).to.exist;\n      // side menu starts closed\n      expect(el.menuOpened).to.be.false;\n      expect(nav?.querySelector('#menu')?.getAttribute('class')).to.contain(\n        'hidden'\n      );\n\n      // let's open menu\n      el.toggleMenu();\n      await el.updateComplete;\n\n      expect(el.menuOpened).to.be.true;\n      expect(nav?.querySelector('#menu')?.getAttribute('class')).to.not.contain(\n        'hidden'\n      );\n    });\n\n    it('opens menu shortcut with `@manageSideMenuEvents`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n      const detail = {\n        menuId: 'fullscreen',\n        action: 'open',\n      };\n\n      el.menuContents = [menuProvider];\n      await el.updateComplete;\n      const frame = el.shadowRoot?.querySelector('#frame');\n      // default menu open behavior is to side menu open, not overlay\n      expect(frame?.getAttribute('class')).to.contain('shift');\n\n      expect(el.menuOpened).to.be.false;\n      expect(el.openMenu).to.be.undefined;\n      expect(frame?.getAttribute('class')).to.not.contain('open');\n\n      const event = new CustomEvent('updateSideMenu', {\n        detail,\n      }) as ToggleSideMenuOpenEvent;\n      el.manageSideMenuEvents(event);\n      await el.updateComplete;\n\n      expect(el.shouldRenderMenu).to.be.true;\n      expect(el.menuOpened).to.be.true;\n      expect(el.openMenu).to.equal(detail.menuId);\n\n      expect(frame?.getAttribute('class')).to.contain('open');\n\n      // no menu provided\n      const openShortcutSpy = Sinon.spy(el, 'openShortcut');\n      const toggleMenuSpy = Sinon.spy(el, 'toggleMenu');\n\n      const noMenuProvidedEvent = new CustomEvent('updateSideMenu', {\n        detail: {},\n      }) as any;\n      el.manageSideMenuEvents(noMenuProvidedEvent);\n      await el.updateComplete;\n\n      expect(openShortcutSpy.called).to.be.false;\n      expect(toggleMenuSpy.called).to.be.false;\n\n      // toggle menu\n      const toggleMenuEvent = new CustomEvent('updateSideMenu', {\n        detail: { action: 'toggle', menuId: 'fullscreen' },\n      }) as any;\n      el.manageSideMenuEvents(toggleMenuEvent);\n      await el.updateComplete;\n\n      expect(toggleMenuSpy.callCount).to.equal(1);\n\n      // open menu\n      const openMenuEvent = new CustomEvent('updateSideMenu', {\n        detail: { action: 'open', menuId: 'fullscreen' },\n      }) as any;\n      el.manageSideMenuEvents(openMenuEvent);\n      await el.updateComplete;\n\n      expect(openShortcutSpy.callCount).to.equal(1);\n    });\n  });\n\n  describe('el.menuContents', () => {\n    it('draws side menu when populated', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      el.menuContents = [menuProvider];\n      await el.updateComplete;\n      expect(el.menuContents.length).to.exist;\n      expect(el.shouldRenderMenu).to.be.true;\n\n      const nav = el.shadowRoot?.querySelector('nav');\n      expect(nav).to.exist;\n\n      const menuSlider = nav?.querySelector('ia-menu-slider');\n      expect(menuSlider).to.exist;\n      expect(menuSlider?.getAttribute('manuallyhandleclose')).to.exist;\n      expect(menuSlider?.getAttribute('open')).to.exist;\n    });\n  });\n\n  describe('`el.menuShortcuts`', () => {\n    it('displays shortcut & toggle side menu button', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      const anotherShortcut = {\n        id: 'foo',\n        icon: html`<i class=\"foo-shortcut\"></i>`,\n      };\n      el.menuContents = [menuProvider];\n      el.menuShortcuts = [shortcut, anotherShortcut];\n      await el.updateComplete;\n\n      const nav = el.shadowRoot?.querySelector('nav');\n\n      const shortcutsContainer = nav?.querySelector('.shortcuts');\n      expect(el.menuShortcuts.length).to.exist;\n      expect(nav).to.exist;\n      expect(shortcutsContainer).to.exist;\n      expect(shortcutsContainer?.querySelector('i.fullscreen-test')).to.exist;\n      expect(shortcutsContainer?.querySelector('button.shortcut.foo')).to.exist;\n      expect(nav?.querySelector('.toggle-menu')).to.exist;\n    });\n  });\n\n  describe('Menu events', () => {\n    it('`el.setMenuShortcuts`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n      expect(el.menuShortcuts.length).to.equal(0);\n\n      const menuShortcuts = [shortcut];\n\n      el.setMenuShortcuts({\n        detail: menuShortcuts,\n      } as SetSideMenuShortcutsEvent);\n      await el.updateComplete;\n\n      expect(el.menuShortcuts.length).to.equal(1);\n    });\n    it('`el.setMenuContents`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n      expect(el.menuContents.length).to.equal(0);\n\n      el.setMenuShortcuts({\n        detail: [menuProvider],\n      } as SetSideMenuContentsEvent);\n      await el.updateComplete;\n\n      expect(el.menuShortcuts.length).to.equal(1);\n    });\n    it('`el.setOpenMenu`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      el.setOpenMenu({\n        detail: { id: 'foo' },\n      } as ToggleSidePanelOpenEvent);\n      await el.updateComplete;\n\n      expect(el.openMenu).to.equal('foo');\n      expect(el.selectedMenuId).to.equal('foo');\n\n      // toggles it off\n      el.setOpenMenu({\n        detail: { id: 'foo' },\n      } as ToggleSidePanelOpenEvent);\n      await el.updateComplete;\n\n      expect(el.openMenu).to.be.undefined;\n      expect(el.selectedMenuId).to.equal('');\n    });\n    it('`el.closeMenu`', async () => {\n      const el = await fixture<ItemNavigator>(\n        html`<ia-item-navigator .item=${new ItemStub()}></ia-item-navigator>`\n      );\n\n      el.menuOpened = true;\n      await el.updateComplete;\n\n      expect(el.menuOpened).to.be.true;\n\n      el.closeMenu();\n      await el.updateComplete;\n\n      expect(el.menuOpened).to.be.false;\n    });\n  });\n});\n"]}