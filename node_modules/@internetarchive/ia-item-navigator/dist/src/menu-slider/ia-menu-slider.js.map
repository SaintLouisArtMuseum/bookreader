{"version":3,"file":"ia-menu-slider.js","sourceRoot":"","sources":["../../../src/menu-slider/ia-menu-slider.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, nothing } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport menuSliderCSS from './styles/menu-slider';\nimport '@internetarchive/icon-collapse-sidebar';\nimport './menu-button';\nimport { MenuProviderInterface } from '../interfaces/menu-interfaces';\n\nconst sliderEvents = {\n  closeDrawer: 'menuSliderClosed',\n};\n\n@customElement('ia-menu-slider')\nexport class IaMenuSlider extends LitElement {\n  static get styles() {\n    return menuSliderCSS;\n  }\n\n  @property({ type: Array }) menus: MenuProviderInterface[] = [];\n\n  @property({ type: Boolean }) open = false;\n\n  @property({ type: Boolean }) manuallyHandleClose = false;\n\n  @property({ type: String }) selectedMenu = '';\n\n  @property({ type: Object }) selectedMenuAction = nothing;\n\n  @property({ type: Boolean }) animateMenuOpen = false;\n\n  updated() {\n    const { actionButton } =\n      this.selectedMenuDetails || ({} as Record<string, any>);\n    const actionButtonHasChanged = actionButton !== this.selectedMenuAction;\n    if (actionButtonHasChanged) {\n      this.selectedMenuAction = actionButton || nothing;\n    }\n  }\n\n  /**\n   * Event handler, captures state of selected menu\n   */\n  setSelectedMenu({ detail }: CustomEvent) {\n    const { id } = detail;\n    this.selectedMenu = this.selectedMenu === id ? '' : id;\n    const { actionButton } =\n      this.selectedMenuDetails || ({} as Record<string, any>);\n    this.selectedMenuAction = actionButton || nothing;\n  }\n\n  /**\n   * closes menu drawer\n   */\n  closeMenu() {\n    if (!this.manuallyHandleClose) {\n      this.open = false;\n    }\n    const { closeDrawer } = sliderEvents;\n    const drawerClosed = new CustomEvent(closeDrawer, {\n      detail: this.selectedMenuDetails,\n    });\n    this.dispatchEvent(drawerClosed);\n  }\n\n  get selectedMenuDetails() {\n    const selectedMenu = this.menus.find(\n      menu => (menu as any).id === this.selectedMenu,\n    );\n    return selectedMenu;\n  }\n\n  get selectedMenuComponent() {\n    const menuItem = this.selectedMenuDetails;\n    return menuItem && (menuItem as any)?.component\n      ? (menuItem as any).component\n      : html``;\n  }\n\n  /* render */\n\n  get sliderDetailsClass() {\n    const animate = this.animateMenuOpen ? 'animate' : '';\n    const state = this.open ? 'open' : '';\n    return `${animate} ${state}`;\n  }\n\n  get selectedMenuClass() {\n    return this.selectedMenu ? 'open' : '';\n  }\n\n  get menuItems() {\n    return this.menus.map(\n      (menu: Record<string, any>) => html`\n        <li>\n          <menu-button\n            @menuTypeSelected=${this.setSelectedMenu}\n            .icon=${menu.icon}\n            .label=${menu.label}\n            .menuDetails=${menu.menuDetails}\n            .buttonId=${menu.id}\n            .selected=${menu.id === this.selectedMenu}\n            .followable=${menu.followable}\n            .href=${menu.href}\n          ></menu-button>\n        </li>\n      `,\n    );\n  }\n\n  get renderMenuHeader() {\n    const { label = '', menuDetails = '' } =\n      this.selectedMenuDetails || ({} as Record<string, any>);\n    const headerClass = this.selectedMenuAction ? 'with-secondary-action' : '';\n    const actionBlock = this.selectedMenuAction\n      ? html`<span class=\"custom-action\">${this.selectedMenuAction}</span>`\n      : nothing;\n    return html`\n      <header class=\"${headerClass}\">\n        <div class=\"details\">\n          <h3>${label}</h3>\n          <span class=\"extra-details\">${menuDetails}</span>\n        </div>\n        ${actionBlock} ${this.closeButton}\n      </header>\n    `;\n  }\n\n  get closeButton() {\n    return html`\n      <button\n        class=\"close\"\n        aria-label=\"Close this menu\"\n        @click=${this.closeMenu}\n      >\n        <ia-icon-collapse-sidebar></ia-icon-collapse-sidebar>\n      </button>\n    `;\n  }\n\n  /** @inheritdoc */\n  render() {\n    return html`\n      <div class=\"main\">\n        <div class=\"menu ${this.sliderDetailsClass}\">\n          ${this.closeButton}\n          <ul class=\"menu-list\">\n            ${this.menuItems}\n          </ul>\n          <div\n            class=\"content ${this.selectedMenuClass}\"\n            @menuTypeSelected=${this.setSelectedMenu}\n          >\n            ${this.renderMenuHeader}\n            <section>\n              <div class=\"selected-menu\">${this.selectedMenuComponent}</div>\n            </section>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n"]}