{"version":3,"file":"share-panel.js","sourceRoot":"","sources":["../../../src/menus/share-panel.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable lit-a11y/click-events-have-key-events */\n/* eslint-disable lit-a11y/list */\nimport {\n  css,\n  CSSResult,\n  html,\n  LitElement,\n  nothing,\n  PropertyValues,\n  TemplateResult,\n} from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport '@internetarchive/icon-share/icon-share';\nimport '@internetarchive/icon-twitter/icon-twitter';\nimport '@internetarchive/icon-facebook/icon-facebook';\nimport '@internetarchive/icon-tumblr/icon-tumblr';\nimport '@internetarchive/icon-pinterest/icon-pinterest';\nimport '@internetarchive/icon-email/icon-email';\nimport '@internetarchive/icon-link/icon-link';\n\ntype ShareOption = {\n  name: string;\n  icon: TemplateResult | string;\n  url: string;\n};\n\nconst copyToClipboard = (event: MouseEvent) => {\n  const currentTarget = event.currentTarget as HTMLElement;\n  const textarea = currentTarget.querySelector('textarea');\n  const note = currentTarget.querySelector('small') as any;\n  textarea!.select();\n  document.execCommand('copy');\n  textarea!.blur();\n  note.classList.add('visible');\n  clearTimeout(note.timeout);\n  note.timeout = setTimeout(() => note.classList.remove('visible'), 4000);\n};\n\nexport const iauxShareIcon: TemplateResult = html`<ia-icon-share\n  style=\"width: var(--iconWidth); height: var(--iconHeight);\"\n></ia-icon-share>`;\n\n@customElement('iaux-in-share-panel')\nexport class IauxSharingOptions extends LitElement {\n  @property({ type: String }) baseHost = 'archive.org';\n\n  @property({ type: String }) creator = '';\n\n  @property({ type: String }) description = '';\n\n  @property({ type: Boolean }) embedOptionsVisible = false;\n\n  @property({ type: String }) identifier = '';\n\n  @property({ type: Array }) sharingOptions: ShareOption[] = [];\n\n  @property({ type: String }) type = '';\n\n  @property({ type: Boolean }) renderHeader = false;\n\n  @property({ type: String }) fileSubPrefix = '';\n\n  updated(changed: PropertyValues) {\n    if (changed.has('sharingOptions') && !this.sharingOptions.length) {\n      this.loadProviders();\n    }\n  }\n\n  loadProviders() {\n    let shareUrl = `https://${this.baseHost}/details/${this.identifier}`;\n    if (this.fileSubPrefix) {\n      shareUrl += `/${this.fileSubPrefix}`;\n    }\n    const shareBlurb = [\n      this.description,\n      this.creator,\n      'Free Download, Borrow, and Streaming',\n      'Internet Archive',\n    ]\n      .filter(Boolean)\n      .join(' : ');\n\n    this.sharingOptions = [\n      {\n        name: 'Twitter',\n        icon: html`<ia-icon-twitter></ia-icon-twitter>`,\n        url: `https://twitter.com/intent/tweet?${new URLSearchParams({\n          url: shareUrl,\n          text: shareBlurb,\n          via: 'internetarchive',\n        })}`,\n      },\n      {\n        name: 'Facebook',\n        icon: html`<ia-icon-facebook></ia-icon-facebook>`,\n        url: `https://www.facebook.com/sharer/sharer.php?${new URLSearchParams({\n          u: shareUrl,\n        })}`,\n      },\n      {\n        name: 'Tumblr',\n        icon: html`<ia-icon-tumblr></ia-icon-tumblr>`,\n        url: `https://www.tumblr.com/widgets/share/tool/preview?${new URLSearchParams(\n          {\n            posttype: 'link',\n            canonicalUrl: shareUrl,\n            title: shareBlurb,\n          },\n        )}`,\n      },\n      {\n        name: 'Pinterest',\n        icon: html`<ia-icon-pinterest></ia-icon-pinterest>`,\n        url: `http://www.pinterest.com/pin/create/button/?${new URLSearchParams(\n          {\n            url: shareUrl,\n            description: shareBlurb,\n          },\n        )}`,\n      },\n      {\n        name: 'Email',\n        icon: html`<ia-icon-email></ia-icon-email>`,\n        url: `mailto:?${new URLSearchParams({\n          subject: shareBlurb,\n          body: shareUrl,\n        })}`,\n      },\n    ];\n  }\n\n  get iframeEmbed() {\n    return `<iframe\n      src=\"https://${this.baseHost}/embed/${this.identifier}\"\n      width=\"560\" height=\"384\" frameborder=\"0\"\n      webkitallowfullscreen=\"true\" mozallowfullscreen=\"true\" allowfullscreen\n    ></iframe>`;\n  }\n\n  get bbcodeEmbed() {\n    return `[archiveorg ${this.identifier} width=560 height=384 frameborder=0 webkitallowfullscreen=true mozallowfullscreen=true]`;\n  }\n\n  get helpURL() {\n    return `https://${this.baseHost}/help/audio.php?identifier=${this.identifier}`;\n  }\n\n  get header() {\n    const header = html`<header><h3>Share this ${this.type}</h3></header>`;\n    return this.renderHeader ? header : nothing;\n  }\n\n  render() {\n    return html`\n      ${this.header}\n      <main>\n        ${this.sharingOptions.map(\n          option =>\n            html` <a class=\"share-option\" href=\"${option.url}\" target=\"_blank\">\n              ${option.icon} ${option.name}\n            </a>`,\n        )}\n        <details>\n          <summary class=\"share-option\">\n            <ia-icon-link></ia-icon-link>\n            Get an embeddable link\n          </summary>\n          <div class=\"embed\">\n            <h4>Embed</h4>\n            <div class=\"code\" @click=${copyToClipboard}>\n              <textarea readonly>${this.iframeEmbed}</textarea>\n              <small>Copied to clipboard</small>\n            </div>\n            <h4>\n              Embed for wordpress.com hosted blogs and archive.org item\n              &lt;description&gt; tags\n            </h4>\n            <div class=\"code\" @click=${copyToClipboard}>\n              <textarea readonly>${this.bbcodeEmbed}</textarea>\n              <small>Copied to clipboard</small>\n            </div>\n            <p>\n              Want more?\n              <a href=${this.helpURL}\n                >Advanced embedding details, examples, and help</a\n              >!\n            </p>\n          </div>\n        </details>\n      </main>\n    `;\n  }\n\n  get providerIcon(): TemplateResult {\n    return html`<ia-icon-share\n      style=\"width: var(--iconWidth); height: var(--iconHeight);\"\n    ></ia-icon-share>`;\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        overflow-y: auto;\n        font-size: 1.4rem;\n        box-sizing: border-box;\n      }\n\n      header {\n        display: flex;\n        align-items: baseline;\n      }\n\n      h3 {\n        padding: 0;\n        margin: 0 1rem 0 0;\n        font-size: 1.6rem;\n      }\n\n      h4 {\n        font-size: 1.4rem;\n      }\n\n      main {\n        padding: 1rem 0;\n      }\n\n      .share-option {\n        display: block;\n        padding: 0.5rem 0;\n        font-size: 1.6rem;\n        text-decoration: none;\n        color: var(--shareLinkColor);\n        cursor: pointer;\n      }\n\n      .share-option > * {\n        display: inline-block;\n        padding: 0.2rem;\n        margin-right: 1rem;\n        vertical-align: middle;\n        border: 1px solid var(--shareIconBorder);\n        border-radius: 7px;\n        background: var(--shareIconBg);\n      }\n\n      /* Hide the triangle that appears on details tags */\n      summary::marker {\n        content: '';\n      }\n\n      summary::-webkit-details-marker {\n        display: none;\n      }\n\n      .embed {\n        padding-right: 5px;\n      }\n\n      .embed a {\n        color: var(--shareLinkColor);\n      }\n\n      .code {\n        position: relative;\n      }\n\n      textarea {\n        display: block;\n        width: 100%;\n        height: 120px;\n        padding: 0.8rem 1rem;\n        box-sizing: border-box;\n        resize: none;\n        cursor: pointer;\n        font:\n          normal 1.4rem 'Helvetica Neue',\n          Helvetica,\n          Arial,\n          sans-serif;\n        color: var(--textareaColor, #fff);\n        background: var(--textareaBg, #151515);\n      }\n\n      small {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        height: 3rem;\n        padding: 0.5rem 1rem;\n        box-sizing: border-box;\n        font:\n          normal 1.2rem/2rem 'Helvetica Neue',\n          Helvetica,\n          Arial,\n          sans-serif;\n        color: var(--textareaBg, #151515);\n        background: var(--textareaColor, #fff);\n        opacity: 0;\n        transition: opacity 300ms linear;\n      }\n      small.visible {\n        opacity: 1;\n      }\n    `;\n  }\n}\n"]}